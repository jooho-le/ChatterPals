<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ChatterPals Q&A</title>
    <link rel="stylesheet" href="popup.css">
  </head>
  <body>
    <div class="container">
      <!-- Text Analysis -->
      <div class="section">
        <h3 class="section-title">화면 질문 생성</h3>
        <div class="row">
          <small>
            • <b>Question</b>: 선택된 텍스트 분석<br>
            • <b>전체 화면 분석</b>: 페이지 본문(없으면 body) 전체 분석
          </small>
        </div>
        <div class="row">
          <label for="server">서버</label>
          <input id="server" type="text" value="http://127.0.0.1:8008" />
        </div>
        <div class="row">
          <label for="maxq">max_questions</label>
          <input id="maxq" type="number" value="5" min="1" max="10" />
        </div>
        <div class="row button-group">
          <button id="question">Question</button>
          <button id="analyzeAll">전체 화면 분석</button>
          <button id="saveQA" disabled>Save Answers</button>
          <button id="chatStart">Discuss (EN)</button>
        </div>
        <div class="row">
          <div id="result" class="result-box">Ready.</div>
        </div>
        <div class="row">
          <div id="questions" class="questions-container"></div>
        </div>
      </div>

      <!-- Chat -->
      <div id="chat" class="section" style="display:none;">
        <h4 class="section-title">Discuss</h4>
        <div>세션: <code id="sid">-</code></div>
        <div style="margin:6px 0;">AI: <span id="q">(없음)</span></div>
        <div class="row input-group">
          <input id="answer" type="text" placeholder="영어로 답변" />
          <button id="send">Send</button>
        </div>
      </div>

      <hr class="divider">

      <!-- Voice -->
      <div class="section">
        <h3 class="section-title">AI 음성 대화</h3>
        <div class="row button-group">
          <button id="recordBtn">🎤 말하기 시작</button>
          <span id="voiceStatus" class="status-text"></span>
        </div>
        <div class="row result-text">
          <div id="transcript"></div>
          <div id="voiceAnswer"></div>
        </div>
        <audio id="audioPlayer" controls class="audio-player"></audio>
      </div>
    </div>

    <script src="popup.js"></script>
  </body>
</html>
