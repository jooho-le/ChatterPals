<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ChatterPals Q&A</title>
    <style>
      body { width: 360px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 12px; }
      button { margin-right: 6px; }
      #result { white-space: pre-wrap; background: #f6f8fa; padding: 8px; border-radius: 6px; max-height: 160px; overflow: auto; }
      .row { margin-bottom: 8px; }
      input[type=text] { width: 100%; }
      code { background: #f0f0f0; padding: 0 4px; border-radius: 4px; }
      #questions { display: flex; flex-direction: column; gap: 8px; max-height: 240px; overflow: auto; }
      .question-item { border: 1px solid #d0d7de; border-radius: 6px; padding: 8px; background: #fafbfc; }
      .question-text { font-weight: 500; line-height: 1.4; }
      .question-answer { width: 100%; margin-top: 6px; border-radius: 4px; border: 1px solid #c0c4cc; padding: 6px; resize: vertical; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 13px; }
      .question-empty { color: #6b7280; font-size: 12px; }
    </style>
  </head>
  <body>
    <h3 style="margin-top:0">화면 질문 생성</h3>
    <div class="row">
      <small>현재 탭의 선택 텍스트가 있으면 우선 사용, 없으면 URL을 사용합니다.</small>
    </div>
    <div class="row">
      <label>서버</label>
      <input id="server" type="text" value="http://127.0.0.1:8008" />
    </div>
    <div class="row">
      <label>max_questions</label>
      <input id="maxq" type="number" value="5" min="1" max="10" />
    </div>
    <div class="row" style="display:flex; gap:6px; flex-wrap:wrap;">
      <button id="question">Question</button>
      <button id="saveQA" disabled>Save Answers</button>
      <button id="chatStart">Discuss (EN)</button>
    </div>
    <div class="row">
      <div id="result">Ready.</div>
    </div>
    <div class="row" style="margin-bottom:12px;">
      <div id="questions"></div>
    </div>

    <div id="chat" style="display:none; border-top:1px solid #ddd; padding-top:6px;">
      <div>세션: <code id="sid">-</code></div>
      <div style="margin:6px 0;">AI: <span id="q">(없음)</span></div>
      <div class="row">
        <input id="answer" type="text" placeholder="영어로 답변" />
        <button id="send">Send</button>
      </div>
    </div>

    <script src="popup.js"></script>
  </body>
  </html>
